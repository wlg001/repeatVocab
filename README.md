# 英语单词听默APP (English Vocabulary Dictation App)

> 通过快速短期重复输入来增强英语单词的肌肉记忆

一个基于浏览器的本地 Web 应用，帮助你通过听音默写和看中文默写两种模式高效记忆英语单词。

## ✨ 特性

- 🎯 **熟练度系统**：智能追踪每个单词/句子的掌握程度（-100 起始，正确 +1，错误 -1）
- 🎧 **单词双模式练习**：听发音默写 / 看中文默写，可单独或混合使用
- 📝 **句子练习**：看中文输入英文句子，忽略标点符号，专注语言表达 🆕
- ⚡ **实时拼写检查**：输入时即时反馈，错误立即重新输入
- 🏷️ **标签分类**：支持多标签管理，单词与句子共享标签池，可按标签筛选练习
- 📊 **详细统计**：练习次数、正确率、日历视图一目了然，单词与句子分开显示
- 💾 **数据管理**：支持导出/导入 JSON 格式数据，跨设备同步
- ⌨️ **键盘友好**：Alt 键快速播放发音，无需使用鼠标
- 🎨 **VSCode 深色主题**：护眼界面设计

## 🚀 快速开始

### 在线使用

直接在浏览器中打开 `index.html` 文件即可使用，无需安装任何依赖。

### 本地运行

```bash
# 克隆仓库
git clone https://github.com/wlg001/repeatVocab.git

# 进入目录
cd repeatVocab

# 使用浏览器打开 index.html
# Windows: start index.html
# macOS: open index.html
# Linux: xdg-open index.html
```

或使用本地服务器（推荐）：

```bash
# Python 3
python -m http.server 8000

# Node.js
npx http-server

# 然后访问 http://localhost:8000
```

## 📖 使用指南

### 添加单词

**单个添加：**
1. 切换到「单词管理」标签页
2. 输入英文单词、中文释义（逗号分隔多个）、标签（可选）
3. 点击「添加单词」

**批量导入：**
```
harmonization 协调,和谐 [政治,外交]
governance 治理,管理 [政治]
blueprint 蓝图,设计图 [常用]
```
格式：`单词 释义1,释义2 [标签1,标签2]`

### 添加句子 🆕

**单个添加：**
1. 切换到「句子管理」标签页
2. 输入英文句子、中文翻译、标签（可选）
3. 点击「添加句子」

**批量导入：**
```
Hello, how are you?|你好，最近怎么样？ [日常,问候]
I like programming.|我喜欢编程。 [兴趣]
What's your name?|你叫什么名字？
```
格式：`英文句子|中文翻译 [标签1,标签2]`（标签可选）

### 开始练习

1. 选择练习模式（听音/中文/混合）
2. 设置熟练度范围和每日新词数量（可选）
3. 按标签筛选要练习的单词（可选）
4. 点击「开始练习」
5. 听发音或看中文，输入英文单词拼写
6. 按 `Enter` 提交，按 `Alt` 键重听发音

### 快捷键

| 快捷键 | 单词模式 | 句子模式 |
|--------|----------|----------|
| `Enter` | 提交答案 | 提交答案 |
| `Alt` | 播放/重播发音 | 显示完整句子拼写（2秒） |

### 重复添加处理

**智能合并机制** 🆕

当添加已存在的单词或句子时：
- ✅ **合并释义/翻译**：去重保留所有释义（句子用分号分隔多个翻译）
- ✅ **合并标签**：去重合并新旧标签
- ✅ **熟练度调整**：当前值 -10（不低于-100）
- ✅ **保留统计**：练习次数、正确率等历史数据保持不变
- ✅ **确认对话框**：显示合并前后对比，防止误操作

**示例：**
```
添加已存在单词 "example"

当前释义: 示例, 例子
新增释义: 样本, 范例
合并后: 示例, 例子, 样本, 范例

当前标签: 基础
新增标签: 常用
合并后: 基础, 常用

熟练度: -85 → -95
```

### 数据管理

- **导出数据**：点击「导出数据」按钮，下载 JSON 文件
- **导入数据**：点击「导入数据」按钮，选择之前导出的 JSON 文件
- **修复统计**：如果统计数据异常，点击「修复统计数据」尝试从练习日志恢复

## 🎯 核心功能

### 熟练度系统

- 每个单词/句子初始熟练度：**-100**
- 完整拼写正确：**+1**
- 拼写错误或未完成：**-1**
- 连续错误 5 次后显示正确答案（3 秒）
- 优先练习熟练度最低的单词/句子

### 练习模式

#### 单词练习

**听发音默写**
- 播放单词发音，根据听到的内容拼写
- 按 Alt 键可重复播放

**看中文默写**
- 显示一个随机中文释义
- 输入框显示首字母提示（保持大小写）
- 按 Alt 键可听发音作为提示

#### 句子练习 🆕

**看中文输入英文**
- 显示中文翻译，输入对应的英文句子
- 自动忽略标点符号（., ! ? ; : ' " ( ) [ ] { }）
- 连续错误 5 次后显示正确答案

**批量导入格式：**
```
Hello, how are you?|你好，最近怎么样？ [日常,问候]
I like programming.|我喜欢编程。 [兴趣]
What's your name?|你叫什么名字？
```
格式：`英文句子|中文翻译 [标签1,标签2]`（标签可选）

### 统计功能

- 📅 **日历视图**：显示每日练习的单词/句子数量和正确率（分开显示）
- 📈 **单词统计**：每个单词的练习次数、正确/错误次数
- 📝 **句子统计**：每个句子的练习次数、正确/错误次数
- 🎯 **整体数据**：总单词数、总句子数、总练习次数、正确率

## 🛠️ 技术栈

- **前端**：HTML5 + CSS3 + Vanilla JavaScript
- **存储**：LocalStorage（浏览器本地存储）
- **发音**：Web Speech API
- **版本控制**：Git

## 📁 项目结构

```
repeatVocab/
├── index.html      # 主页面
├── style.css       # 样式文件
├── app.js          # 核心逻辑
├── README.md       # 项目说明
└── devlog.md       # 开发日志
```

## 🔧 数据结构

```javascript
// 单词对象
{
  id: "1733901234567-a7b3c9d2e",  // 唯一ID（时间戳-随机数）
  word: "example",                 // 英文单词
  meanings: ["示例", "例子"],      // 中文释义数组
  tags: ["基础", "常用"],          // 标签数组
  proficiency: -100,               // 熟练度
  addedTime: "2025-12-08T10:00:00Z", // 添加时间
  stats: {
    practiceCount: 0,    // 练习次数
    correctCount: 0,     // 正确次数
    errorCount: 0,       // 错误次数
    lastPracticeTime: null // 最后练习时间
  }
}

// 句子对象 🆕
{
  id: "1734220567890-x1y2z3w4v",  // 唯一ID（时间戳-随机数）
  english: "Hello, how are you?",  // 英文句子
  chinese: "你好，最近怎么样？",    // 中文翻译
  tags: ["日常", "问候"],          // 标签数组（与单词共享标签池）
  proficiency: -100,               // 熟练度
  addedTime: "2025-12-15T10:00:00Z", // 添加时间
  stats: {
    practiceCount: 0,    // 练习次数
    correctCount: 0,     // 正确次数
    errorCount: 0,       // 错误次数
    lastPracticeTime: null // 最后练习时间
  }
}
```

## 🐛 常见问题

**Q: 数据会丢失吗？**
A: 数据存储在浏览器的 LocalStorage 中，除非主动清除浏览器数据，否则会一直保留。建议定期使用导出功能备份数据。

**Q: 可以在多个设备间同步吗？**
A: 目前通过导出/导入 JSON 文件实现跨设备数据传输。

**Q: 发音不准确怎么办？**
A: 使用的是浏览器内置的 Web Speech API，发音质量取决于系统和浏览器。推荐使用 Chrome 或 Edge 浏览器。

**Q: 统计数据显示不正确？**
A: 点击「单词管理」页面的「修复统计数据」按钮，系统会尝试从练习日志中恢复统计信息。

## 📝 开发日志

详细的开发历程请查看 [devlog.md](devlog.md)

## 🤝 贡献

欢迎提交 Issue 和 Pull Request！

## 📄 许可证

MIT License

## 👤 作者

wlg001

---

⭐ 如果这个项目对你有帮助，请给它一个 Star！